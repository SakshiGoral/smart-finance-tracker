{"ast":null,"code":"import{useEffect,useState}from\"react\";import{Card,CardContent,CardHeader,CardTitle}from\"@/components/ui/card\";import{API,toast}from\"@/App\";import axios from\"axios\";import{LineChart,Line,BarChart,Bar,PieChart,Pie,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from\"recharts\";import{DollarSign,TrendingUp,TrendingDown,Wallet}from\"lucide-react\";import{motion}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COLORS=['#3b82f6','#8b5cf6','#ec4899','#10b981','#f59e0b','#ef4444'];export default function Dashboard(){const[summary,setSummary]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchSummary();},[]);const fetchSummary=async()=>{try{const response=await axios.get(\"\".concat(API,\"/analytics/summary\"));setSummary(response.data);}catch(error){toast.error(\"Failed to load dashboard data\");}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-96\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-lg text-slate-600\",children:\"Loading dashboard...\"})});}if(!summary)return null;const categoryData=Object.entries(summary.category_breakdown||{}).map(_ref=>{let[name,value]=_ref;return{name,value};});const statCards=[{title:\"Total Income\",value:\"$\".concat(summary.total_income.toFixed(2)),icon:TrendingUp,color:\"text-green-600\",bg:\"bg-green-50\"},{title:\"Total Expenses\",value:\"$\".concat(summary.total_expense.toFixed(2)),icon:TrendingDown,color:\"text-red-600\",bg:\"bg-red-50\"},{title:\"Current Balance\",value:\"$\".concat(summary.balance.toFixed(2)),icon:Wallet,color:\"text-blue-600\",bg:\"bg-blue-50\"}];return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",\"data-testid\":\"dashboard\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:0.5},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold text-slate-800 mb-2\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-600\",children:\"Your financial overview at a glance\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:statCards.map((stat,index)=>{const Icon=stat.icon;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:index*0.1},children:/*#__PURE__*/_jsxs(Card,{className:\"glass card-hover border-0 shadow-lg\",\"data-testid\":\"stat-card-\".concat(index),children:[/*#__PURE__*/_jsxs(CardHeader,{className:\"flex flex-row items-center justify-between pb-2\",children:[/*#__PURE__*/_jsx(CardTitle,{className:\"text-sm font-medium text-slate-600\",children:stat.title}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 rounded-lg \".concat(stat.bg),children:/*#__PURE__*/_jsx(Icon,{className:\"h-5 w-5 \".concat(stat.color)})})]}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-slate-800\",\"data-testid\":\"stat-value-\".concat(index),children:stat.value})})]})},stat.title);})}),categoryData.length>0&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:0.5,delay:0.3},children:/*#__PURE__*/_jsxs(Card,{className:\"glass border-0 shadow-lg\",\"data-testid\":\"category-chart\",children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(CardTitle,{className:\"text-2xl font-bold text-slate-800\",children:\"Expenses by Category\"})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:400,children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:categoryData,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref2=>{let{name,percent}=_ref2;return\"\".concat(name,\": \").concat((percent*100).toFixed(0),\"%\");},outerRadius:120,fill:\"#8884d8\",dataKey:\"value\",children:categoryData.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:COLORS[index%COLORS.length]},\"cell-\".concat(index)))}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>\"$\".concat(value.toFixed(2))})]})})})]})})]});}","map":{"version":3,"names":["useEffect","useState","Card","CardContent","CardHeader","CardTitle","API","toast","axios","LineChart","Line","BarChart","Bar","PieChart","Pie","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","DollarSign","TrendingUp","TrendingDown","Wallet","motion","jsx","_jsx","jsxs","_jsxs","COLORS","Dashboard","summary","setSummary","loading","setLoading","fetchSummary","response","get","concat","data","error","className","children","categoryData","Object","entries","category_breakdown","map","_ref","name","value","statCards","title","total_income","toFixed","icon","color","bg","total_expense","balance","div","initial","opacity","y","animate","transition","duration","stat","index","Icon","delay","length","width","height","cx","cy","labelLine","label","_ref2","percent","outerRadius","fill","dataKey","entry","formatter"],"sources":["/app/frontend/src/pages/Dashboard.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { API, toast } from \"@/App\";\nimport axios from \"axios\";\nimport { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\";\nimport { DollarSign, TrendingUp, TrendingDown, Wallet } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\n\nconst COLORS = ['#3b82f6', '#8b5cf6', '#ec4899', '#10b981', '#f59e0b', '#ef4444'];\n\nexport default function Dashboard() {\n  const [summary, setSummary] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchSummary();\n  }, []);\n\n  const fetchSummary = async () => {\n    try {\n      const response = await axios.get(`${API}/analytics/summary`);\n      setSummary(response.data);\n    } catch (error) {\n      toast.error(\"Failed to load dashboard data\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <div className=\"text-lg text-slate-600\">Loading dashboard...</div>\n      </div>\n    );\n  }\n\n  if (!summary) return null;\n\n  const categoryData = Object.entries(summary.category_breakdown || {}).map(([name, value]) => ({\n    name,\n    value\n  }));\n\n  const statCards = [\n    {\n      title: \"Total Income\",\n      value: `$${summary.total_income.toFixed(2)}`,\n      icon: TrendingUp,\n      color: \"text-green-600\",\n      bg: \"bg-green-50\"\n    },\n    {\n      title: \"Total Expenses\",\n      value: `$${summary.total_expense.toFixed(2)}`,\n      icon: TrendingDown,\n      color: \"text-red-600\",\n      bg: \"bg-red-50\"\n    },\n    {\n      title: \"Current Balance\",\n      value: `$${summary.balance.toFixed(2)}`,\n      icon: Wallet,\n      color: \"text-blue-600\",\n      bg: \"bg-blue-50\"\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"dashboard\">\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n      >\n        <h1 className=\"text-4xl font-bold text-slate-800 mb-2\">Dashboard</h1>\n        <p className=\"text-slate-600\">Your financial overview at a glance</p>\n      </motion.div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {statCards.map((stat, index) => {\n          const Icon = stat.icon;\n          return (\n            <motion.div\n              key={stat.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.5, delay: index * 0.1 }}\n            >\n              <Card className=\"glass card-hover border-0 shadow-lg\" data-testid={`stat-card-${index}`}>\n                <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\n                  <CardTitle className=\"text-sm font-medium text-slate-600\">\n                    {stat.title}\n                  </CardTitle>\n                  <div className={`p-2 rounded-lg ${stat.bg}`}>\n                    <Icon className={`h-5 w-5 ${stat.color}`} />\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-3xl font-bold text-slate-800\" data-testid={`stat-value-${index}`}>\n                    {stat.value}\n                  </div>\n                </CardContent>\n              </Card>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {categoryData.length > 0 && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5, delay: 0.3 }}\n        >\n          <Card className=\"glass border-0 shadow-lg\" data-testid=\"category-chart\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl font-bold text-slate-800\">Expenses by Category</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ResponsiveContainer width=\"100%\" height={400}>\n                <PieChart>\n                  <Pie\n                    data={categoryData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                    outerRadius={120}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {categoryData.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                  <Tooltip formatter={(value) => `$${value.toFixed(2)}`} />\n                </PieChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        </motion.div>\n      )}\n    </div>\n  );\n}"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,IAAI,CAAEC,WAAW,CAAEC,UAAU,CAAEC,SAAS,KAAQ,sBAAsB,CAC/E,OAASC,GAAG,CAAEC,KAAK,KAAQ,OAAO,CAClC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,IAAI,CAAEC,QAAQ,CAAEC,GAAG,CAAEC,QAAQ,CAAEC,GAAG,CAAEC,IAAI,CAAEC,KAAK,CAAEC,KAAK,CAAEC,aAAa,CAAEC,OAAO,CAAEC,MAAM,CAAEC,mBAAmB,KAAQ,UAAU,CACjJ,OAASC,UAAU,CAAEC,UAAU,CAAEC,YAAY,CAAEC,MAAM,KAAQ,cAAc,CAC3E,OAASC,MAAM,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,MAAM,CAAG,CAAC,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAC,CAEjF,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAClC,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGjC,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACkC,OAAO,CAAEC,UAAU,CAAC,CAAGnC,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACdqC,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA9B,KAAK,CAAC+B,GAAG,IAAAC,MAAA,CAAIlC,GAAG,sBAAoB,CAAC,CAC5D4B,UAAU,CAACI,QAAQ,CAACG,IAAI,CAAC,CAC3B,CAAE,MAAOC,KAAK,CAAE,CACdnC,KAAK,CAACmC,KAAK,CAAC,+BAA+B,CAAC,CAC9C,CAAC,OAAS,CACRN,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,GAAID,OAAO,CAAE,CACX,mBACEP,IAAA,QAAKe,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cACpDhB,IAAA,QAAKe,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CAAC,sBAAoB,CAAK,CAAC,CAC/D,CAAC,CAEV,CAEA,GAAI,CAACX,OAAO,CAAE,MAAO,KAAI,CAEzB,KAAM,CAAAY,YAAY,CAAGC,MAAM,CAACC,OAAO,CAACd,OAAO,CAACe,kBAAkB,EAAI,CAAC,CAAC,CAAC,CAACC,GAAG,CAACC,IAAA,MAAC,CAACC,IAAI,CAAEC,KAAK,CAAC,CAAAF,IAAA,OAAM,CAC5FC,IAAI,CACJC,KACF,CAAC,EAAC,CAAC,CAEH,KAAM,CAAAC,SAAS,CAAG,CAChB,CACEC,KAAK,CAAE,cAAc,CACrBF,KAAK,KAAAZ,MAAA,CAAMP,OAAO,CAACsB,YAAY,CAACC,OAAO,CAAC,CAAC,CAAC,CAAE,CAC5CC,IAAI,CAAElC,UAAU,CAChBmC,KAAK,CAAE,gBAAgB,CACvBC,EAAE,CAAE,aACN,CAAC,CACD,CACEL,KAAK,CAAE,gBAAgB,CACvBF,KAAK,KAAAZ,MAAA,CAAMP,OAAO,CAAC2B,aAAa,CAACJ,OAAO,CAAC,CAAC,CAAC,CAAE,CAC7CC,IAAI,CAAEjC,YAAY,CAClBkC,KAAK,CAAE,cAAc,CACrBC,EAAE,CAAE,WACN,CAAC,CACD,CACEL,KAAK,CAAE,iBAAiB,CACxBF,KAAK,KAAAZ,MAAA,CAAMP,OAAO,CAAC4B,OAAO,CAACL,OAAO,CAAC,CAAC,CAAC,CAAE,CACvCC,IAAI,CAAEhC,MAAM,CACZiC,KAAK,CAAE,eAAe,CACtBC,EAAE,CAAE,YACN,CAAC,CACF,CAED,mBACE7B,KAAA,QAAKa,SAAS,CAAC,WAAW,CAAC,cAAY,WAAW,CAAAC,QAAA,eAChDd,KAAA,CAACJ,MAAM,CAACoC,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,EAAG,CAAE,CAChCC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAxB,QAAA,eAE9BhB,IAAA,OAAIe,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,WAAS,CAAI,CAAC,cACrEhB,IAAA,MAAGe,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,qCAAmC,CAAG,CAAC,EAC3D,CAAC,cAEbhB,IAAA,QAAKe,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CACnDS,SAAS,CAACJ,GAAG,CAAC,CAACoB,IAAI,CAAEC,KAAK,GAAK,CAC9B,KAAM,CAAAC,IAAI,CAAGF,IAAI,CAACZ,IAAI,CACtB,mBACE7B,IAAA,CAACF,MAAM,CAACoC,GAAG,EAETC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAG,CAAEI,KAAK,CAAEF,KAAK,CAAG,GAAI,CAAE,CAAA1B,QAAA,cAElDd,KAAA,CAAC5B,IAAI,EAACyC,SAAS,CAAC,qCAAqC,CAAC,2BAAAH,MAAA,CAA0B8B,KAAK,CAAG,CAAA1B,QAAA,eACtFd,KAAA,CAAC1B,UAAU,EAACuC,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eACrEhB,IAAA,CAACvB,SAAS,EAACsC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,CACtDyB,IAAI,CAACf,KAAK,CACF,CAAC,cACZ1B,IAAA,QAAKe,SAAS,mBAAAH,MAAA,CAAoB6B,IAAI,CAACV,EAAE,CAAG,CAAAf,QAAA,cAC1ChB,IAAA,CAAC2C,IAAI,EAAC5B,SAAS,YAAAH,MAAA,CAAa6B,IAAI,CAACX,KAAK,CAAG,CAAE,CAAC,CACzC,CAAC,EACI,CAAC,cACb9B,IAAA,CAACzB,WAAW,EAAAyC,QAAA,cACVhB,IAAA,QAAKe,SAAS,CAAC,mCAAmC,CAAC,4BAAAH,MAAA,CAA2B8B,KAAK,CAAG,CAAA1B,QAAA,CACnFyB,IAAI,CAACjB,KAAK,CACR,CAAC,CACK,CAAC,EACV,CAAC,EAnBFiB,IAAI,CAACf,KAoBA,CAAC,CAEjB,CAAC,CAAC,CACC,CAAC,CAELT,YAAY,CAAC4B,MAAM,CAAG,CAAC,eACtB7C,IAAA,CAACF,MAAM,CAACoC,GAAG,EACTC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAG,CAAEI,KAAK,CAAE,GAAI,CAAE,CAAA5B,QAAA,cAE1Cd,KAAA,CAAC5B,IAAI,EAACyC,SAAS,CAAC,0BAA0B,CAAC,cAAY,gBAAgB,CAAAC,QAAA,eACrEhB,IAAA,CAACxB,UAAU,EAAAwC,QAAA,cACThB,IAAA,CAACvB,SAAS,EAACsC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAC,sBAAoB,CAAW,CAAC,CAC/E,CAAC,cACbhB,IAAA,CAACzB,WAAW,EAAAyC,QAAA,cACVhB,IAAA,CAACP,mBAAmB,EAACqD,KAAK,CAAC,MAAM,CAACC,MAAM,CAAE,GAAI,CAAA/B,QAAA,cAC5Cd,KAAA,CAACjB,QAAQ,EAAA+B,QAAA,eACPhB,IAAA,CAACd,GAAG,EACF2B,IAAI,CAAEI,YAAa,CACnB+B,EAAE,CAAC,KAAK,CACRC,EAAE,CAAC,KAAK,CACRC,SAAS,CAAE,KAAM,CACjBC,KAAK,CAAEC,KAAA,MAAC,CAAE7B,IAAI,CAAE8B,OAAQ,CAAC,CAAAD,KAAA,UAAAxC,MAAA,CAAQW,IAAI,OAAAX,MAAA,CAAK,CAACyC,OAAO,CAAG,GAAG,EAAEzB,OAAO,CAAC,CAAC,CAAC,OAAI,CACxE0B,WAAW,CAAE,GAAI,CACjBC,IAAI,CAAC,SAAS,CACdC,OAAO,CAAC,OAAO,CAAAxC,QAAA,CAEdC,YAAY,CAACI,GAAG,CAAC,CAACoC,KAAK,CAAEf,KAAK,gBAC7B1C,IAAA,CAACb,IAAI,EAAuBoE,IAAI,CAAEpD,MAAM,CAACuC,KAAK,CAAGvC,MAAM,CAAC0C,MAAM,CAAE,UAAAjC,MAAA,CAA7C8B,KAAK,CAA0C,CACnE,CAAC,CACC,CAAC,cACN1C,IAAA,CAACT,OAAO,EAACmE,SAAS,CAAGlC,KAAK,MAAAZ,MAAA,CAASY,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CAAG,CAAE,CAAC,EACjD,CAAC,CACQ,CAAC,CACX,CAAC,EACV,CAAC,CACG,CACb,EACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}